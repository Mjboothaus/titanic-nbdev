---

title: Validation Playground

keywords: fastai
sidebar: home_sidebar



---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: great_expectations/notebooks/sql/validation_playground.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">great_expectations</span> <span class="k">as</span> <span class="nn">ge</span>
<span class="kn">import</span> <span class="nn">great_expectations.jupyter_ux</span>
<span class="kn">from</span> <span class="nn">great_expectations.datasource.types</span> <span class="kn">import</span> <span class="n">BatchKwargs</span>
<span class="kn">import</span> <span class="nn">datetime</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>2020-08-10T16:59:05+1000 - INFO - Great Expectations logging enabled at 20 level by JupyterUX module.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="1.-Get-a-DataContext">1. Get a DataContext<a class="anchor-link" href="#1.-Get-a-DataContext"> </a></h2><p>This represents your <strong>project</strong> that you just created using <code>great_expectations init</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">context</span> <span class="o">=</span> <span class="n">ge</span><span class="o">.</span><span class="n">data_context</span><span class="o">.</span><span class="n">DataContext</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="2.-Choose-an-Expectation-Suite">2. Choose an Expectation Suite<a class="anchor-link" href="#2.-Choose-an-Expectation-Suite"> </a></h2><p>List expectation suites that you created in your project</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">context</span><span class="o">.</span><span class="n">list_expectation_suite_names</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">expectation_suite_name</span> <span class="o">=</span>  <span class="c1"># TODO: set to a name from the list above</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="3.-Load-a-batch-of-data-you-want-to-validate">3. Load a batch of data you want to validate<a class="anchor-link" href="#3.-Load-a-batch-of-data-you-want-to-validate"> </a></h2><p>To learn more about <code>get_batch</code>, see <a href="https://docs.greatexpectations.io/en/latest/tutorials/validate_data.html?utm_source=notebook&amp;utm_medium=validate_data#load-a-batch-of-data-to-validate">this tutorial</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">[</span><span class="n">datasource</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">datasource</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">list_datasources</span><span class="p">()</span> <span class="k">if</span> <span class="n">datasource</span><span class="p">[</span><span class="s1">&#39;class_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;SqlAlchemyDatasource&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">datasource_name</span> <span class="o">=</span> <span class="c1"># TODO: set to a datasource name from above</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">batch_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;table&#39;</span><span class="p">:</span> <span class="s2">&quot;YOUR_TABLE&quot;</span><span class="p">,</span> <span class="s1">&#39;datasource&#39;</span><span class="p">:</span> <span class="n">datasource_name</span><span class="p">}</span>

<span class="c1"># If you would like to validate an entire table or view from a non-default schema in your database:</span>
<span class="n">batch_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;table&#39;</span><span class="p">:</span> <span class="s2">&quot;YOUR_TABLE&quot;</span><span class="p">,</span> <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;YOUR_SCHEMA&quot;</span><span class="p">,</span> <span class="s1">&#39;datasource&#39;</span><span class="p">:</span> <span class="n">datasource_name</span><span class="p">}</span>

<span class="c1"># If you would like to validate the result set of a query:</span>
<span class="c1"># batch_kwargs = {&#39;query&#39;: &#39;SELECT YOUR_ROWS FROM YOUR_TABLE&#39;, &#39;datasource&#39;: datasource_name}</span>



<span class="n">batch</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="n">batch_kwargs</span><span class="p">,</span> <span class="n">expectation_suite_name</span><span class="p">)</span>
<span class="n">batch</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="4.-Validate-the-batch-with-Validation-Operators">4. Validate the batch with Validation Operators<a class="anchor-link" href="#4.-Validate-the-batch-with-Validation-Operators"> </a></h2><p><code>Validation Operators</code> provide a convenient way to bundle the validation of
multiple expectation suites and the actions that should be taken after validation.</p>
<p>When deploying Great Expectations in a <strong>real data pipeline, you will typically discover these needs</strong>:</p>
<ul>
<li>validating a group of batches that are logically related</li>
<li>validating a batch against several expectation suites such as using a tiered pattern like <code>warning</code> and <code>failure</code></li>
<li>doing something with the validation results (e.g., saving them for a later review, sending notifications in case of failures, etc.).</li>
</ul>
<p><a href="https://docs.greatexpectations.io/en/latest/tutorials/validate_data.html?utm_source=notebook&amp;utm_medium=validate_data#save-validation-results">Read more about Validation Operators in the tutorial</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Create a run_id. The run_id must be of type RunIdentifier, with optional run_name and run_time instantiation</span>
<span class="sd">arguments (or a dictionary with these keys). The run_name can be any string (this could come from your pipeline</span>
<span class="sd">runner, e.g. Airflow run id). The run_time can be either a dateutil parsable string or a datetime object.</span>
<span class="sd">Note - any provided datetime will be assumed to be a UTC time. If no instantiation arguments are given, run_name will</span>
<span class="sd">be None and run_time will default to the current UTC datetime.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">run_id</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;run_name&quot;</span><span class="p">:</span> <span class="s2">&quot;some_string_that_uniquely_identifies_this_run&quot;</span><span class="p">,</span>  <span class="c1"># insert your own run_name here</span>
  <span class="s2">&quot;run_time&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">run_validation_operator</span><span class="p">(</span>
    <span class="s2">&quot;action_list_operator&quot;</span><span class="p">,</span>
    <span class="n">assets_to_validate</span><span class="o">=</span><span class="p">[</span><span class="n">batch</span><span class="p">],</span>
    <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="5.-View-the-Validation-Results-in-Data-Docs">5. View the Validation Results in Data Docs<a class="anchor-link" href="#5.-View-the-Validation-Results-in-Data-Docs"> </a></h2><p>Let's now build and look at your Data Docs. These will now include an <strong>data quality report</strong> built from the <code>ValidationResults</code> you just created that helps you communicate about your data with both machines and humans.</p>
<p><a href="https://docs.greatexpectations.io/en/latest/tutorials/validate_data.html?utm_source=notebook&amp;utm_medium=validate_data#view-the-validation-results-in-data-docs">Read more about Data Docs in the tutorial</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">context</span><span class="o">.</span><span class="n">open_data_docs</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Congratulations!-You-ran-Validations!">Congratulations! You ran Validations!<a class="anchor-link" href="#Congratulations!-You-ran-Validations!"> </a></h2><h2 id="Next-steps:">Next steps:<a class="anchor-link" href="#Next-steps:"> </a></h2><h3 id="1.-Read-about-the-typical-workflow-with-Great-Expectations:">1. Read about the typical workflow with Great Expectations:<a class="anchor-link" href="#1.-Read-about-the-typical-workflow-with-Great-Expectations:"> </a></h3><p><a href="https://docs.greatexpectations.io/en/latest/getting_started/typical_workflow.html?utm_source=notebook&amp;utm_medium=validate_data#view-the-validation-results-in-data-docs">typical workflow</a></p>
<h3 id="2.-Explore-the-documentation-&amp;-community">2. Explore the documentation &amp; community<a class="anchor-link" href="#2.-Explore-the-documentation-&amp;-community"> </a></h3><p>You are now among the elite data professionals who know how to build robust descriptions of your data and protections for pipelines and machine learning models. Join the <a href="https://greatexpectations.io/slack"><strong>Great Expectations Slack Channel</strong></a> to see how others are wielding these superpowers.</p>

</div>
</div>
</div>
</div>
 

